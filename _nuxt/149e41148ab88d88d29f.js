(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{166:function(s,e,a){"use strict";a.r(e);var n={},t=a(15),_=Object(t.a)(n,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("section",[a("div",{staticClass:"content"},[a("h1",[s._v("Lint/UriEscapeUnescape")]),s._v(" "),a("ul",[a("li",[s._v("概要")]),s._v(" "),a("li",[s._v("例")]),s._v(" "),a("li",[s._v("なぜ？")]),s._v(" "),a("li",[s._v("回避する方法")])]),s._v(" "),a("h2",[s._v("概要")]),s._v(" "),a("blockquote",[a("p",[s._v("This cop identifies places where "),a("code",[s._v("URI.escape")]),s._v(" can be replaced by "),a("code",[s._v("CGI.escape")]),s._v(", "),a("code",[s._v("URI.encode_www_form")]),s._v(" or "),a("code",[s._v("URI.encode_www_form_component")]),s._v(" depending on your specific use case. Also this cop identifies places where "),a("code",[s._v("URI.unescape")]),s._v(" can be replaced by "),a("code",[s._v("CGI.unescape")]),s._v(", "),a("code",[s._v("URI.decode_www_form")]),s._v(" or "),a("code",[s._v("URI.decode_www_form_component")]),s._v(" depending on your specific use case.")])]),s._v(" "),a("h2",[s._v("例")]),s._v(" "),a("pre",[a("code",{staticClass:"language-ruby"},[a("span",{staticClass:"hljs-comment"},[s._v("# bad")]),s._v("\nURI.escape("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(")\nURI.encode("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("# good")]),s._v("\nCGI.escape("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(")\nURI.encode_www_form([["),a("span",{staticClass:"hljs-string"},[s._v("'example'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'param'")]),s._v("], ["),a("span",{staticClass:"hljs-string"},[s._v("'lang'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'en'")]),s._v("]])\nURI.encode_www_form("),a("span",{staticClass:"hljs-symbol"},[s._v("page:")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("10")]),s._v(", "),a("span",{staticClass:"hljs-symbol"},[s._v("locale:")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'en'")]),s._v(")\nURI.encode_www_form_component("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("# bad")]),s._v("\nURI.unescape(enc_uri)\nURI.decode(enc_uri)\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("# good")]),s._v("\nCGI.unescape(enc_uri)\nURI.decode_www_form(enc_uri)\nURI.decode_www_form_component(enc_uri)\n")])]),s._v(" "),a("h2",[s._v("なぜ？")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.ruby-lang.org/ja/latest/method/URI/s/encode.html"}},[s._v("公式ガイド")]),s._v(" にもあるように、URI.encode, URI.decode はobsoluteになっているため、将来の変更前に代替手段を取らなくてはなりません。")]),s._v(" "),a("p",[s._v("ただ、単純にURI.encode を CGI.escape や URI.encode_www_form に置き換えれば良いかと言うと、注意が必要です。")]),s._v(" "),a("p",[s._v("少し古い記事ですが、"),a("a",{attrs:{href:"http://d.hatena.ne.jp/riocampos+tech/20131025/p1"}},[s._v("こちら")]),s._v(" にも記載されているように、各々のメソッドで処理結果が違ってくる可能性があります。")]),s._v(" "),a("h2",[s._v("回避する方法")]),s._v(" "),a("h3",[s._v("記述行のみ")]),s._v(" "),a("pre",[a("code",{staticClass:"language-ruby"},[s._v("URI.escape("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(") "),a("span",{staticClass:"hljs-comment"},[s._v("# rubocop:disable Lint/UriEscapeUnescape")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("特定のメソッドのみ")]),s._v(" "),a("pre",[a("code",{staticClass:"language-ruby"},[a("span",{staticClass:"hljs-comment"},[s._v("# rubocop:disable Lint/UriEscapeUnescape")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("def")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("example")])]),s._v("\n  URI.escape("),a("span",{staticClass:"hljs-string"},[s._v("'http://example.com'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("end")]),s._v("\n"),a("span",{staticClass:"hljs-comment"},[s._v("# rubocop:enable Lint/UriEscapeUnescape")]),s._v("\n")])]),s._v(" "),a("h3",[s._v("アプリケーション全体")]),s._v(" "),a("pre",[a("code",{staticClass:"language-ruby"},[a("span",{staticClass:"hljs-comment"},[s._v("# .rubocop.yml")]),s._v("\nLint/"),a("span",{staticClass:"hljs-symbol"},[s._v("UriEscapeUnescape:")]),s._v("\n  "),a("span",{staticClass:"hljs-symbol"},[s._v("Enabled:")]),s._v(" "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n")])])])])}],!1,null,null,null);_.options.__file="UriEscapeUnescape.vue";e.default=_.exports}}]);